{% extends "main.html" %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/form.css') }}">
<form action="/download" method="post" enctype="multipart/form-data" target="_blank">



    <div class="row">
        <div class="col">
            <div class="mb-3 form-section card">
                <div class="card-body">
                    <h5 class="input-info card-title mb-3">1. {{form_text.choose_flie_header}}</h5>
                    <input class="form-control" type="file" accept=".pdf" name="file" />
                </div>
            </div>

            <!-- Language Selection -->
            <div class="mb-3 card form-section" id="lang">
                <div class="card-body">
                    <h5 class="card-title">2. {{form_text.language_header}}</h5>
                    <div class="d-flex flex-column">
                        {% for book_language in form_data.book_languages %}
                        <div>
                            <input class="form-check-input" type="radio" id="{{book_language}}" name="book_lang"
                                value="{{book_language}}">
                            <label class="form-check-label" for="{{book_language}}">{{book_language}}</label>
                        </div>
                        {% endfor%}
                    </div>
                </div>

            </div>

            <!-- Booklet Numbers Selection -->
            <div class="mb-3 form-section card" id="booklet_numbers">
                <div class="card-body">
                    <h5 class="card-title">3. {{form_text.booklet_parameters}}</h5>

                    <div class="mb-1">
                        <label class="form-label" for="pages">{{form_text.inst_pages}}</label>
                        <input class="form-control" type="num" min="4" placeholder="32" id="pages" name="pages">
                    </div>

                    <div>
                        <label class="form-label" for="pages_per_sheet">{{form_text.inst_per_pages}}</label>
                        <input class="form-control" type="text" id="pages_per_sheet" name="pages_per_sheet">
                    </div>
                </div>
            </div>

        </div>

        <div class="col">
            <div class="form-section card mb-3">
                <div class="card-body">
                    <h5 class="card-title">4. {{form_text.inst_merge.split('?')[0]+'?'}}</h5>
                    <h6 class="card-subtitle">{{form_text.inst_merge.split('?')[1]}}</h6>
                    {% for merge_type in form_data.merge_types %}
                    <div>
                        <input class="form-check-input" type="radio" id="{{merge_type}}" name="pdf_merge_type"
                            value="{{merge_type}}">
                        <label class="form-check-label" for="{{merge_type}}">{{merge_type}}</label>
                    </div>
                    {% endfor%}
                </div>
            </div>

            <!-- <div class="form-section card mb-3">
                <div class="card-body">
                    <h5 class="card-title">5. {{form_text.page_type_title}}</h5>
                    <div class="d-flex">
                        {% for page_type in form_data.page_types %}
                        <div class="p-2 m-2">
                            <input class="form-check-input" type="radio" id="{{page_type}}" name="page_size"
                                value="{{page_type}}">
                            <label for="{{page_type}}">{{page_type}}</label>
                        </div>
                        {% endfor%}
                    </div>
                </div>
            </div> -->
            <div class="form-section card mb-3">
                <div class="card-body">

                    <h5 class="card-title">5. {{form_text.booklet_options}}</h5>

                    <div class="form-check form-switch">
                        <label class="form-check-label" for="cut_lines">{{form_text.cut_lines}}</label>
                        <input class="form-check-input" type="checkbox" id="cut_lines" name="cut_lines"
                            value="cut_lines">
                    </div>

                    <div class="form-check form-switch">
                        <label class="form-check-label" for="page_numbering">{{form_text.page_numbering}}</label>
                        <input class="form-check-input" type="checkbox" id="page_numbering" name="page_numbering"
                            value="page_numbering">
                    </div>
                </div>
            </div>
              <!-- Save For Others (sfo) -->
        <div class="form-section card mb-3">
            <div class="card-body">
                <h5 class="card-title">6. {{form_text.sfo_title}}</h5>

                <div class="form-check form-switch">
                    <label class="form-check-label" for="save_for_others">{{form_text.save_for_others}}</label>
                    <input id="sfo-check" class="form-check-input" type="checkbox" id="save_for_others" name="save_for_others"
                        value="save_for_others">
                </div>

                <div id="sfo-form" class="mt-2">
                    <div>
                        <label class="form-label" for="sfo_book_name">{{form_text.sfo_book_name}}</label>
                        <input class="form-control" type="text" id="sfo_book_name" name="sfo_book_name">
                    </div>

                    <div>
                        <label class="form-label" for="sfo_author">{{form_text.sfo_author}}</label>
                        <input class="form-control" type="text" id="sfo_author" name="sfo_author">
                    </div>

                    <select class="form-select mt-2" name="sfo_genre">
                        <option selected>{{form_text.sfo_genre}}</option>

                        {% for genre in form_text.sfo_options.genres %}
                        <option value="{{genre}}">{{genre}}</option>
                        {% endfor %}
                    </select>

                    <select class="form-select mt-2" name="sfo_era">
                        <option selected>{{form_text.sfo_era}}</option>

                        {% for era in form_text.sfo_options.eras %}
                        <option value="{{era}}">{{era}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        </div>


        <input class="btn btn-success" type="submit" value="{{form_text.submit_text}}" id="submit_btn" />
    </div>

</form>

<script>
let sfo_inputs = document.querySelectorAll('#sfo-form input, #sfo-form select');
function disable() {
    sfo_inputs.forEach(input => input.setAttribute('disabled', true));
}
function enable() {
    sfo_inputs.forEach(input => input.removeAttribute('disabled'));
}
disable();

let sfo_check = document.getElementById('sfo-check');
sfo_check.addEventListener('change', event => {
    if(sfo_check.checked)
        enable();
    else {
        disable();
    }
})
</script>
{% endblock %}